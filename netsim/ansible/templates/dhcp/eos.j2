{% if 'server' in dhcp|default({}) %}
{%   include 'eos.server.j2' %}
!
{% endif %}
{% for intf in interfaces if dhcp.server is defined or intf.dhcp is defined %}
interface {{ intf.ifname }}
{%   if dhcp.server is defined %}
{%     for afx in ('ipv4','ipv6') if afx in af %}
  dhcp server {{ afx }}
{%     endfor %}
{%   endif %}
{%   if intf.dhcp.client.ipv4 is defined %}
  ip address dhcp
{%   endif %}
{%   for target in intf.dhcp.relay.ipv4|default([]) %}
  ip helper-address {{ target }}
{%   endfor %}
{%   for target in intf.dhcp.relay.ipv6|default([]) %}
  ipv6 dhcp relay destination {{ target }}
{%   endfor %}
{% endfor %}
