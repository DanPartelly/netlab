[WARNING]: Could not match supplied host pattern, ignoring: unprovisioned

PLAY [Deploy initial device configuration] *************************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [dut]
ok: [probe]

TASK [Find device readiness script] ********************************************
ok: [dut]
ok: [probe]

TASK [Wait for device to become ready] *****************************************
skipping: [dut]
skipping: [probe]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, probe

TASK [Figure out whether to deploy the module initial on current device] *******
ok: [dut]
ok: [probe]

TASK [Find configuration template for initial] *********************************
ok: [dut]
ok: [probe]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [probe]

TASK [Find configuration deployment deploy_script for initial] *****************
ok: [dut]
ok: [probe]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/srlinux.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/frr/initial-clab.yml for probe

TASK [Check that required plugin exists, use 'netlab install grpc' to install it] ***
ok: [dut]

TASK [tempfile] ****************************************************************
changed: [dut -> localhost]

TASK [template] ****************************************************************
changed: [dut -> localhost]

TASK [Generated gNMI config based on /home/pipi/net101/tools/netsim/ansible/templates/initial/srlinux.j2] ***
skipping: [dut]

TASK [Update SRL initial node configuration (gNMI SET template=/home/pipi/net101/tools/netsim/ansible/templates/initial/srlinux.j2,CA=/work/netlab_cicd/clab-ml_17/.tls/ca/ca.pem)] ***
changed: [dut]

TASK [debug] *******************************************************************
skipping: [dut]

TASK [file] ********************************************************************
changed: [dut -> localhost]

TASK [Load VRF kernel module] **************************************************
changed: [probe -> localhost]

TASK [include_tasks] ***********************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/frr/deploy-config.yml for probe

TASK [template] ****************************************************************
changed: [probe]

TASK [set_fact] ****************************************************************
ok: [probe]

TASK [run /tmp/config.sh to deploy initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
changed: [probe]

TASK [run vtysh to import initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
skipping: [probe]

PLAY [Deploy module-specific configurations] ***********************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [dut]
ok: [probe]

TASK [Deploy individual configuration modules] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, probe => (item=bgp)

TASK [Figure out whether to deploy the module bgp on current device] ***********
ok: [dut]
ok: [probe]

TASK [Find configuration template for bgp] *************************************
ok: [dut]
ok: [probe]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [probe]

TASK [Find configuration deployment deploy_script for bgp] *********************
ok: [dut]
ok: [probe]

TASK [Deploy bgp configuration] ************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/srlinux.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for probe

TASK [Check that required plugin exists, use 'netlab install grpc' to install it] ***
skipping: [dut]

TASK [tempfile] ****************************************************************
changed: [dut -> localhost]

TASK [template] ****************************************************************
changed: [dut -> localhost]

TASK [Generated gNMI config based on /home/pipi/net101/tools/netsim/ansible/templates/bgp/srlinux.j2] ***
skipping: [dut]

TASK [Update SRL bgp node configuration (gNMI SET template=/home/pipi/net101/tools/netsim/ansible/templates/bgp/srlinux.j2,CA=/work/netlab_cicd/clab-ml_17/.tls/ca/ca.pem)] ***
changed: [dut]

TASK [debug] *******************************************************************
skipping: [dut]

TASK [file] ********************************************************************
changed: [dut -> localhost]

TASK [template] ****************************************************************
changed: [probe]

TASK [set_fact] ****************************************************************
ok: [probe]

TASK [run /tmp/config.sh to deploy bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
skipping: [probe]

TASK [run vtysh to import bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
changed: [probe]

PLAY [Deploy custom deployment templates] **************************************

TASK [Run custom configuration deployment scripts] *****************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-custom-config.yml for dut => (item=bgp.policy)

TASK [Find configuration template] *********************************************
ok: [dut]

TASK [fail] ********************************************************************
skipping: [dut]

TASK [Check is the configuration template is a file] ***************************
ok: [dut -> localhost]

TASK [fail] ********************************************************************
skipping: [dut]

TASK [Process template /home/pipi/net101/tools/netsim/extra/bgp.policy/srlinux.j2 for dut] ***
[WARNING]: The value 'True' is not a valid IP address or network, passing this
value to ipaddr filter might result in breaking change in future.
skipping: [dut]

TASK [Find custom configuration deployment script] *****************************
ok: [dut]

TASK [Run the configuration deployment script] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/srlinux.yml for dut

TASK [Check that required plugin exists, use 'netlab install grpc' to install it] ***
skipping: [dut]

TASK [tempfile] ****************************************************************
changed: [dut -> localhost]

TASK [template] ****************************************************************
changed: [dut -> localhost]

TASK [Generated gNMI config based on /home/pipi/net101/tools/netsim/extra/bgp.policy/srlinux.j2] ***
skipping: [dut]

TASK [Update SRL bgp.policy node configuration (gNMI SET template=/home/pipi/net101/tools/netsim/extra/bgp.policy/srlinux.j2,CA=/work/netlab_cicd/clab-ml_17/.tls/ca/ca.pem)] ***
fatal: [dut]: FAILED! => 
  msg: |-
    The conditional check 'd!=[] or (u!=[] and u!="") or r!=[]' failed. The error was: An unhandled exception occurred while templating '{{ cfg.delete | default([]) }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ lookup('file', tempfile_1.path ) | from_yaml }}'. Error was a <class 'yaml.scanner.ScannerError'>, original message: block sequence entries are not allowed in this context
      in "<unicode string>", line 26, column 14
  
    The error appears to be in '/home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/srlinux.yml': line 58, column 17, but may
    be elsewhere in the file depending on the exact syntax problem.
  
    The offending line appears to be:
  
      # - debug: var=hostvars
                    ^ here
  
    There appears to be both 'k=v' shorthand syntax and YAML in this task. Only one syntax may be used.
    We could be wrong, but this one looks like it might be an issue with
    missing quotes. Always quote template expression brackets when they
    start a value. For instance:
  
        with_items:
          - {{ foo }}
  
    Should be written as:
  
        with_items:
          - "{{ foo }}"

PLAY RECAP *********************************************************************
dut                        : ok=29   changed=10   unreachable=0    failed=1    skipped=13   rescued=0    ignored=0   
probe                      : ok=21   changed=5    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   

Fatal error in netlab: Executing Ansible playbook /home/pipi/net101/tools/netsim/ansible/initial-config.ansible failed
Error executing ansible-playbook /home/pipi/net101/tools/netsim/ansible/initial-config.ansible:
  Command '['ansible-playbook', '/home/pipi/net101/tools/netsim/ansible/initial-config.ansible']' returned non-zero exit status 2.
