nodes:
  client:
  server:
    module: [ dhcp ]
    device: eos
    dhcp.server: true
    provider: clab

links:
- client:
    ipv4: dhcp
  server:

validate:
  wait:
    description: Wait a bit for DHCP client and server
    wait: 5
  lease:
    description: Check for DHCP server lease
    nodes: [ server ]
    pass: The DHCP server has an active IPv4 lease
    fail: There are no IPv4 leases on the DHCP server
    show:
      eos: "dhcp server leases | json"
    valid:
      eos: vrfs.default.ipv4ActiveLeases

message: |
  Use this topology to test the DHCPv4 client on your device. Use 'netlab
  validate' to report check whether your device requested a DHCP lease on the
  DHCP server.
