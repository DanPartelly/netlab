---
- name: save config
  arrcus.arcos.arcos_command:
   commands: "show running-config |  save /tmp/.{{ inventory_hostname }}"
   encoding: text

- name: fetch config
  ansible.builtin.slurp:
   src: "/tmp/.{{ inventory_hostname }}"
  register: arcosconfig

- name: set net config for ArcOS
  ansible.builtin.set_fact:
    ansible_net_config:  "{{ arcosconfig['content'] | b64decode }}"

- name: remove old backup
  ansible.builtin.file:
   path: "/tmp/.{{ inventory_hostname }}"
   state: absent

