[WARNING]: Invalid characters were found in group names but not replaced, use
-vvvv to see details
[WARNING]: Could not match supplied host pattern, ignoring: unprovisioned

PLAY [Deploy initial device configuration] *************************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [r2]
ok: [rc]
ok: [x1]
ok: [dut]

TASK [Find device readiness script] ********************************************
ok: [r2]
ok: [rc]
ok: [x1]
ok: [dut]

TASK [Wait for device to become ready] *****************************************
skipping: [r2]
skipping: [rc]
skipping: [x1]
included: /home/pipi/net101/tools/netsim/ansible/tasks/readiness-check/vjunos-switch-clab.yml for dut

TASK [Wait for SSH server] *****************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/readiness-check/vm-clab-ssh-check.yml for dut

TASK [Execute local ssh command to check vjunos-switch readiness] **************
FAILED - RETRYING: [dut -> localhost]: Execute local ssh command to check vjunos-switch readiness (40 retries left).
FAILED - RETRYING: [dut -> localhost]: Execute local ssh command to check vjunos-switch readiness (39 retries left).
changed: [dut -> localhost]

TASK [Confirm dut SSH server works] ********************************************
ok: [dut] => 
  msg: Node dut is ready.

TASK [Wait for ge-0/0/0 interface] *********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/readiness-check/vjunos-switch.yml for dut

TASK [Wait for ge-0/0/0 to appear] *********************************************
ok: [dut]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1

TASK [Figure out whether to deploy the module initial on current device] *******
ok: [r2]
ok: [x1]
ok: [rc]
ok: [dut]

TASK [Find configuration template for initial] *********************************
ok: [r2]
ok: [rc]
ok: [dut]
ok: [x1]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for initial] *****************
ok: [r2]
ok: [dut]
ok: [rc]
ok: [x1]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/junos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/frr/initial-clab.yml for r2, rc, x1

TASK [junos_config: deploying initial from /home/pipi/net101/tools/netsim/ansible/templates/initial/junos.j2] ***
changed: [dut]

TASK [Attempt to load VRF kernel module] ***************************************
changed: [rc -> localhost]
changed: [r2 -> localhost]
changed: [x1 -> localhost]

TASK [Disable FRR management VRF when modprobe fails] **************************
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [include_tasks] ***********************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/frr/deploy-config.yml for r2, rc, x1

TASK [template] ****************************************************************
changed: [rc]
changed: [r2]
changed: [x1]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]
ok: [x1]

TASK [run /tmp/config.sh to deploy initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
changed: [r2]
changed: [x1]
changed: [rc]

TASK [run vtysh to import initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
skipping: [r2]
skipping: [rc]
skipping: [x1]

PLAY [Deploy module-specific configurations] ***********************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [r2]
ok: [rc]
ok: [dut]
ok: [x1]

TASK [Deploy individual configuration modules] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1 => (item=bgp)
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1 => (item=ospf)

TASK [Figure out whether to deploy the module bgp on current device] ***********
ok: [r2]
ok: [rc]
ok: [x1]
ok: [dut]

TASK [Find configuration template for bgp] *************************************
ok: [rc]
ok: [r2]
ok: [x1]
ok: [dut]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for bgp] *********************
ok: [x1]
ok: [r2]
ok: [dut]
ok: [rc]

TASK [Deploy bgp configuration] ************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/junos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for r2, rc, x1

TASK [junos_config: deploying bgp from /home/pipi/net101/tools/netsim/ansible/templates/bgp/junos.j2] ***
[WARNING]:  statement not found
changed: [dut]

TASK [template] ****************************************************************
changed: [r2]
changed: [x1]
changed: [rc]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]
ok: [x1]

TASK [run /tmp/config.sh to deploy bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [run vtysh to import bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
changed: [r2]
changed: [rc]
changed: [x1]

TASK [Figure out whether to deploy the module ospf on current device] **********
ok: [r2]
ok: [rc]
ok: [x1]
ok: [dut]

TASK [Find configuration template for ospf] ************************************
skipping: [x1]
ok: [r2]
ok: [rc]
ok: [dut]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for ospf] ********************
skipping: [x1]
ok: [r2]
ok: [dut]
ok: [rc]

TASK [Deploy ospf configuration] ***********************************************
skipping: [x1]
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/junos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for r2, rc

TASK [junos_config: deploying ospf from /home/pipi/net101/tools/netsim/ansible/templates/ospf/junos.j2] ***
changed: [dut]

TASK [template] ****************************************************************
changed: [r2]
changed: [rc]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]

TASK [run /tmp/config.sh to deploy ospf config from /home/pipi/net101/tools/netsim/ansible/templates/ospf/frr.j2] ***
skipping: [r2]
skipping: [rc]

TASK [run vtysh to import ospf config from /home/pipi/net101/tools/netsim/ansible/templates/ospf/frr.j2] ***
changed: [rc]
changed: [r2]

PLAY [Deploy custom deployment templates] **************************************

TASK [Run custom configuration deployment scripts] *****************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-custom-config.yml for rc => (item=frr-community)

TASK [Find configuration template] *********************************************
ok: [rc]

TASK [fail] ********************************************************************
skipping: [rc]

TASK [Check is the configuration template is a file] ***************************
ok: [rc -> localhost]

TASK [fail] ********************************************************************
skipping: [rc]

TASK [Process template /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2 for rc] ***
skipping: [rc]

TASK [Find custom configuration deployment script] *****************************
ok: [rc]

TASK [Run the configuration deployment script] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for rc

TASK [template] ****************************************************************
changed: [rc]

TASK [set_fact] ****************************************************************
ok: [rc]

TASK [run /tmp/config.sh to deploy frr-community config from /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2] ***
skipping: [rc]

TASK [run vtysh to import frr-community config from /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2] ***
changed: [rc]

PLAY RECAP *********************************************************************
dut                        : ok=27   changed=4    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
r2                         : ok=29   changed=7    unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
rc                         : ok=37   changed=9    unreachable=0    failed=0    skipped=12   rescued=0    ignored=0   
x1                         : ok=23   changed=5    unreachable=0    failed=0    skipped=10   rescued=0    ignored=0   



Use this topology to test the BGP community propagation. The device under test
is a BGP route reflector that should propagate standard and extended
communities to IBGP neighbors but only extended communities to EBGP neighbors
(the default setting).

Three BGP communities are attached to the prefix advertised by RC: a standard
one, an extended one, and a long one (standard communitiy using 4-octet AS)

