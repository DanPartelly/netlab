[WARNING]: Could not match supplied host pattern, ignoring: unprovisioned

PLAY [Deploy initial device configuration] *************************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Find device readiness script] ********************************************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Wait for device to become ready] *****************************************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1

TASK [Figure out whether to deploy the module initial on current device] *******
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Find configuration template for initial] *********************************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for initial] *****************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Deploy initial configuration] ********************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/vyos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for r2, rc, x1

TASK [wait_for_connection] *****************************************************
skipping: [dut]

TASK [wait_for] ****************************************************************
skipping: [dut]

TASK [set_fact] ****************************************************************
ok: [dut]

TASK [template] ****************************************************************
changed: [dut]

TASK [execute config-initial.sh to deploy initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/vyos.j2] ***
changed: [dut]

TASK [template] ****************************************************************
changed: [r2]
changed: [x1]
changed: [rc]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]
ok: [x1]

TASK [run /tmp/config.sh to deploy initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
changed: [r2]
changed: [rc]
changed: [x1]

TASK [run vtysh to import initial config from /home/pipi/net101/tools/netsim/ansible/templates/initial/frr.j2] ***
skipping: [r2]
skipping: [rc]
skipping: [x1]

PLAY [Deploy module-specific configurations] ***********************************

TASK [Set variables that cannot be set with VARS] ******************************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Deploy individual configuration modules] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1 => (item=bgp)
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-module.yml for dut, r2, rc, x1 => (item=ospf)

TASK [Figure out whether to deploy the module bgp on current device] ***********
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Find configuration template for bgp] *************************************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for bgp] *********************
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Deploy bgp configuration] ************************************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/vyos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for r2, rc, x1

TASK [wait_for_connection] *****************************************************
skipping: [dut]

TASK [wait_for] ****************************************************************
skipping: [dut]

TASK [set_fact] ****************************************************************
ok: [dut]

TASK [template] ****************************************************************
changed: [dut]

TASK [execute config-bgp.sh to deploy bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/vyos.j2] ***
changed: [dut]

TASK [template] ****************************************************************
changed: [r2]
changed: [rc]
changed: [x1]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]
ok: [x1]

TASK [run /tmp/config.sh to deploy bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [run vtysh to import bgp config from /home/pipi/net101/tools/netsim/ansible/templates/bgp/frr.j2] ***
changed: [rc]
changed: [r2]
changed: [x1]

TASK [Figure out whether to deploy the module ospf on current device] **********
ok: [dut]
ok: [r2]
ok: [rc]
ok: [x1]

TASK [Find configuration template for ospf] ************************************
skipping: [x1]
ok: [dut]
ok: [r2]
ok: [rc]

TASK [Print deployed configuration when running in verbose mode] ***************
skipping: [dut]
skipping: [r2]
skipping: [rc]
skipping: [x1]

TASK [Find configuration deployment deploy_script for ospf] ********************
skipping: [x1]
ok: [dut]
ok: [r2]
ok: [rc]

TASK [Deploy ospf configuration] ***********************************************
skipping: [x1]
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/vyos.yml for dut
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for r2, rc

TASK [wait_for_connection] *****************************************************
skipping: [dut]

TASK [wait_for] ****************************************************************
skipping: [dut]

TASK [set_fact] ****************************************************************
ok: [dut]

TASK [template] ****************************************************************
changed: [dut]

TASK [execute config-ospf.sh to deploy ospf config from /home/pipi/net101/tools/netsim/ansible/templates/ospf/vyos.j2] ***
changed: [dut]

TASK [template] ****************************************************************
changed: [rc]
changed: [r2]

TASK [set_fact] ****************************************************************
ok: [r2]
ok: [rc]

TASK [run /tmp/config.sh to deploy ospf config from /home/pipi/net101/tools/netsim/ansible/templates/ospf/frr.j2] ***
skipping: [r2]
skipping: [rc]

TASK [run vtysh to import ospf config from /home/pipi/net101/tools/netsim/ansible/templates/ospf/frr.j2] ***
changed: [rc]
changed: [r2]

PLAY [Deploy custom deployment templates] **************************************

TASK [Run custom configuration deployment scripts] *****************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-custom-config.yml for rc => (item=frr-community)

TASK [Find configuration template] *********************************************
ok: [rc]

TASK [fail] ********************************************************************
skipping: [rc]

TASK [Process template /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2 for rc] ***
skipping: [rc]

TASK [Find custom configuration deployment script] *****************************
ok: [rc]

TASK [Run the configuration deployment script] *********************************
included: /home/pipi/net101/tools/netsim/ansible/tasks/deploy-config/frr.yml for rc

TASK [template] ****************************************************************
changed: [rc]

TASK [set_fact] ****************************************************************
ok: [rc]

TASK [run /tmp/config.sh to deploy frr-community config from /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2] ***
skipping: [rc]

TASK [run vtysh to import frr-community config from /home/pipi/net101/tools/tests/integration/bgp/frr-community.j2] ***
changed: [rc]

PLAY RECAP *********************************************************************
dut                        : ok=27   changed=6    unreachable=0    failed=0    skipped=10   rescued=0    ignored=0   
r2                         : ok=27   changed=6    unreachable=0    failed=0    skipped=7    rescued=0    ignored=0   
rc                         : ok=34   changed=8    unreachable=0    failed=0    skipped=10   rescued=0    ignored=0   
x1                         : ok=21   changed=4    unreachable=0    failed=0    skipped=9    rescued=0    ignored=0   



Use this topology to test the BGP community propagation. The device under test
is a BGP route reflector that should propagate standard and extended
communities to IBGP neighbors but only extended communities to EBGP neighbors
(the default setting).

Three BGP communities are attached to the prefix advertised by RC: a standard
one, an extended one, and a long one (standard communitiy using 4-octet AS)

